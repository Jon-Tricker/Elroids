<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
	<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=windows-1252">
	<TITLE>Elroids developer notes.</TITLE>
	<meta name="description" content="3D, space, rock bashing game.">
	<meta name="keywords" content="elroids, developer notes">
	<meta name="author" content="Jon Tricker">

	<!-- Include external CSS -->
	<link rel="stylesheet" href="../../mycss.css">

</HEAD>

<BODY>
	<P LANG="en-GB" ALIGN=CENTER><IMG SRC="../Logo.jpg" NAME="Logo" WIDTH=250 HEIGHT=200 BORDER=0>
</P>
	<H1 LANG="en-GB" ALIGN=CENTER CLASS="western">'Elroids' Developer Notes.</H1>

	<H2>Source access</H2>
	<P>There is a, currently private, github repository <A HREF="https://github.com/Jon-Tricker/Elroids">here</A>. </P>
	<P>Alternatly it's all just script. You can 'inspect'/download the code from your browser.</P>
	<P>There is also a facebook discussion group <A HREF="https://www.facebook.com/groups/1134918534166826">here</A>. If you want github access please join this and post a request to be added.</P>

	<H2>Bugs</H2>
	<UL>
		<LI>Exhaust flame is supposed to be yellow ... investigate why it is not.</LI>
		<LI>Missiles are created too far in front of ship (see 'quantization' issue below) ... fix</LI>
		<LI>Sometime rock split and the fragmants dissapear at high speed. Possibly some bug in separateFrom().</LI>
	</UL>

	<H2>ToDos (In some sort of priority order)</H2>

	<H3>V1.x Ship maintence game (CURRENTLY IN PROGRESS)</H3>
	<P>There is no point having the economic game if there is nothing to spend the profits on. The next thing is to componientize the ship ... So it can have upgrades.</P>
	<P>Conponent sub classes:</P>
	<UL>
		<LI>Weapon beam</LI>
		<LI>Weapon missile</LI>
		<LI>Hull</LI>
		<LI>Engine</LI>
		<LI>Thrusters (directional control)</LI>
		<LI>Targeting computer</LI>
		<LI>Docking computer</LI>
		<LI>Range finder</LI>
		<LI>Cargo bay</LI>
	</UL>
	<P>Add ship management menu.</P>
	<P>Add component purchace menu.</P>
	<P>Implement menu INPUT tags,</P>
	<P>Add menu error handling (pop up?).</P>

	<H3>V2.x Economics game</H3>
	<P>Add the 'Elite' stuff about trading, upgrades etc.</P>
		<UL>
			<LI>Add 'minerals' to pick up after rock destroyed (dependant on rock composition).</LI>
			<LI>Extend menu syetem to have extra controls necessary for trading.</LI>
			<LI>Add space station:
				<UL>
					<LI>Docking.</LI>
					<LI>Trade.</LI>
					<LI>Ship upgrades.</LI>
					<LI>Ship repairs.</LI>
				</UL>
			</LI>
			<LI>Extended uiverse:
				<UL>
					<LI>Multiple systems (stations?).</LI>
					<LI>Warp drive.</LI>
					<LI>Galactic map.</LI>
				</UL>
			</LI>
		</UL>


	<H3>General 'good stuff' ... Post V1.0</H3>
	<UL>
		<LI>Game mechanics:
			<UL>
				<LI>Improve 'vision through' wrap to take account of camera direction (i.e. dont just use Universe.handleWrap()). i.e. allow rocks to be seen at full universe width not half.</LI>
			<LI>Improve 'collision detection' mechanism (Item.detectCollision()).
				<UL>
					<LI>Currently using, crude, bounding spheres.</LI>
					<LI>Collision only checked at end of animate phase. Posibly check a cylinder, occupied by the object during the phase, against sphere of target,</LI>
					<LI>Use ray tracing.</LI>
					<LI>Carve the universe into 'regions'. So don't have the square law issue of checking collisions between everything and 'everthing else'.</LI>
				</UL>
				</LI>
				<LI>Limited number of missiles in flight (like Asteroids).</LI>
			</UL>
			<LI>Do something about saucer 'seeking' target location behaviour ... or maybe just leave it since it looks like defensive manouvering.</LI>
			<LI>Componentize sacucer</LI>
			<LI>Handle rock re-spawning when they are destroyed.</LI>
		</LI>

		<LI>Code:</LI>
		<LI>Prettiness:</LI>
		<UL>
		<LI>Create 'exploding ship' animation. (Exploding Mesh? Then it could also do rocks/saucers etc.)</LI>
		<LI>Add surface texture to ship.</LI>
		<LI>Make saucers more 'shiny'. Probably involves MeshPhongMaterial ... but for me that just comes out white.</LI>
		<LI>Add extra vt100 features (e.g. block graphics) to ship control terminal.</LI>
		</UL>
		
		<LI>Additional features:
			<UL>
				<LI>Add 'lock' to cross hairs. Colour change and display range when allingned with a target.</LI>
				<LI>Add upgrades to ship (as purchaces):
					<UL>
						<LI>Homeing missile + Missile lock.</LI>
						<LI>Proximity missiles (mainly for use by the bad guys).</LI>
						<LI>'Elite style' (over heating) laser.</LI>
						<LI>Shields.</LI>	
						<LI>Hypespace button. </LI>
						<LI>Improved terminal (but keep VT100 as default).</LI>
					</UL>
					<LI>Handle damage (malfunction) of ship sub-systems (engineering control panel).</LI>
				</LI>
				<LI>Implement mother ships spawning more mother ships?</LI>
			</UL>
		</LI>

		<LI>UI improvements:
			<UL>
				<LI>Add mouse controls.</LI>
				<LI>Make radar zoomable.</LI>
				<LI>Add joystick/tablet controls (maybe via on screen buttons reproducing keyboard keys).</LI>
			</UL>
		</LI>

		<LI>Extensions:
			<UL>
				<LI>Test on platforms other than PC/Chrome</LI>
				<LI>Add sound (3D?).</LI>
				<LI>Make it multi-player (AJAX?).</LI>
				<LI>Add optional gravity effects (like Gravitar).</LI>
				<LI>Add on line high score table?</LI>
				<LI>Add save/load ... not sure how on a web based game.</LI>
				<LI>Maybe collision damage should be proportional to mass and relative speed of colliding object. Common for all items apart from 'rock on rock' impacts.</LI>
				<LI>Revisit inline 'ToDos'.</LI>
			</UL>
		</LI>
	</UL>

	<H2>Learnings</H2>
	<UL>	
		<LI>Three JS is oriented towards 'landscape' scenes. 
		odd things (flipings and unexpected rotations) 
		can happen if a camera flies over the 'poles'. 
		After a lot of effort I worked round this by making the 'chase/pilot
		cameras' part of the ship.
		</LI>
		<LI>1D conservation of momentum, during collisions, is handled as described in the equasions
		<A HREF="https://en.wikipedia.org/wiki/Momentum"> here.</A>
		Most discussion on extending this to 3D decends into a mass of 'Euler angles' and 'trig'. However since we have both the
		velocities and impact direction as x, y and z components it can be handled using
		dot products (and less CPU) ... but it took a while to get the maths right.
		</LI>
		<LI>There are problems with 'quantized' time. A slower moving object can catch up with and collide with a faster one if it gets a move phase 'first'. Some messy work round have been required.</LI>
	</UL>

	<H2>Units and dimensions</H2>
	<P>This project was coded with arbitary units of distance/mass. I have since modified it to use something resembling SI.</P>
	<UL>
		<LI>Distance is in Meters.</LI>
		<LI>Mass is in Tonnes (1000KG).</LI>
		<LI>Time is in seconds.</LI>
		<LI>Rocks have a mass equal to the cube of their size. i.e (assuming cubic rocks) a density of about 1 tonne/m^3. Probably should be a bit higher and related to their composition. However it will do for now. </LI>
	</UL>

	<P>There are a few incorrect 'artifacts' to make the game playable.</P>
	<UL>
		<LI>Rock mass is proportional to the cube of its size. When a rock splits it make 2 rocks of half the size. So 3/4 of the mass is lost. However this makes for a mangable amounts of minerals once a rock is broken down. (The spare mass becomes 'dark matter')</LI>
		<LI>Universe is too small. Only a few km across. Necessary to keep a reasonable rock density wihtout a huge number of rocks.</LI>
		<LI>Distances and sizes are far too small for a 'realistic' universe. However if made realistic objects would only be points of light in the distance. For playability everything is moved closer together. (Excuse: StarTrek/Wars battles where ships engage a few hundred meters apart and travelling at a few 10s of kph.)</LI>
		<LI>Ship 'braking' doesn't have real physics equivalent ... but it's useful for game play.</LI>
	</UL>

	<H2>Why not Typescript?</H2>
	<P>As a Java coder I prefer stongly typed languages. However...</P>
	<OL>
		<LI>I only found out about Typescript late in the development of this project.</LI>
		<LI>I want the code available warts/comments and all. Not an additional build step with modified output.</LI>
	</OL>
</BODY>
</HTML>
